<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>canix: canix.h Quellcode</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Erzeugt von Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Hauptseite</span></a></li>
      <li><a href="annotated.html"><span>Datenstrukturen</span></a></li>
      <li class="current"><a href="files.html"><span>Dateien</span></a></li>
    </ul>
  </div>
<h1>canix.h</h1><a href="canix_8h.html">gehe zur Dokumentation dieser Datei</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> *  This file is part of the HCAN tools suite.</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> *  HCAN is free software; you can redistribute it and/or modify it under</span>
<a name="l00005"></a>00005 <span class="comment"> *  the terms of the GNU General Public License as published by the Free</span>
<a name="l00006"></a>00006 <span class="comment"> *  Software Foundation; either version 2 of the License, or (at your</span>
<a name="l00007"></a>00007 <span class="comment"> *  option) any later version.</span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> *  HCAN is distributed in the hope that it will be useful, but WITHOUT</span>
<a name="l00010"></a>00010 <span class="comment"> *  ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or</span>
<a name="l00011"></a>00011 <span class="comment"> *  FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License</span>
<a name="l00012"></a>00012 <span class="comment"> *  for more details.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> *  You should have received a copy of the GNU General Public License along</span>
<a name="l00015"></a>00015 <span class="comment"> *  with HCAN; if not, write to the Free Software Foundation, Inc., 51</span>
<a name="l00016"></a>00016 <span class="comment"> *  Franklin St, Fifth Floor, Boston, MA 02110-1301  USA</span>
<a name="l00017"></a>00017 <span class="comment"> *</span>
<a name="l00018"></a>00018 <span class="comment"> *  (c) 2006 by Martin Haller, mah (at) iuse (dot) org</span>
<a name="l00019"></a>00019 <span class="comment"> */</span>
<a name="l00020"></a>00020 
<a name="l00021"></a>00021 <span class="preprocessor">#ifndef CANIX_H</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span><span class="preprocessor">#define CANIX_H</span>
<a name="l00023"></a>00023 <span class="preprocessor"></span>
<a name="l00065"></a>00065 <span class="preprocessor">#include &lt;avr/io.h&gt;</span>
<a name="l00066"></a>00066 <span class="preprocessor">#include &lt;hcan_eeprom.h&gt;</span>
<a name="l00067"></a>00067 
<a name="l00068"></a><a class="code" href="canix_8h.html#41f9c5fb8b08eb5dc3edce4dcb37fee7">00068</a> <span class="preprocessor">#define true  1</span>
<a name="l00069"></a><a class="code" href="canix_8h.html#65e9886d74aaee76545e83dd09011727">00069</a> <span class="preprocessor"></span><span class="preprocessor">#define false 0</span>
<a name="l00070"></a>00070 <span class="preprocessor"></span>
<a name="l00071"></a><a class="code" href="canix_8h.html#bb452686968e48b67397da5f97445f5b">00071</a> <span class="preprocessor">#define bool char</span>
<a name="l00072"></a>00072 <span class="preprocessor"></span>
<a name="l00077"></a><a class="code" href="canix_8h.html#15b16c1073c60f0be255caf0a60251be">00077</a> <span class="preprocessor">#define ADDR_MASK   0x000003ff</span>
<a name="l00078"></a>00078 <span class="preprocessor"></span>
<a name="l00084"></a><a class="code" href="canix_8h.html#3e1ea9fc2f4c30841e8b211c4c0fadb3">00084</a> <span class="preprocessor">#define PROTO_MASK  0x00000007</span>
<a name="l00085"></a>00085 <span class="preprocessor"></span>
<a name="l00092"></a><a class="code" href="canix_8h.html#b8b49a8dc11502858c972368e759c5f9">00092</a> <span class="preprocessor">#define HCAN_PRIO_LOW 0x03</span>
<a name="l00093"></a>00093 <span class="preprocessor"></span>
<a name="l00100"></a><a class="code" href="canix_8h.html#876de108a9ce18a7750ba4d553115638">00100</a> <span class="preprocessor">#define HCAN_PRIO_HI  0x00</span>
<a name="l00101"></a>00101 <span class="preprocessor"></span>
<a name="l00105"></a><a class="code" href="canix_8h.html#2df540804cd4d777f0970fe487f25173">00105</a> <span class="preprocessor">#define MAX_FRAME_CALLBACKS 16</span>
<a name="l00106"></a>00106 <span class="preprocessor"></span>
<a name="l00110"></a><a class="code" href="canix_8h.html#fc4f14ecab3ee6ce4ee74f6035238121">00110</a> <span class="preprocessor">#define MAX_IDLE_CALLBACKS 8</span>
<a name="l00111"></a>00111 <span class="preprocessor"></span>
<a name="l00115"></a><a class="code" href="canix_8h.html#adee46f93acf45421308a90fc41b5f38">00115</a> <span class="preprocessor">#define MAX_RTC_CALLBACKS 8</span>
<a name="l00116"></a>00116 <span class="preprocessor"></span>
<a name="l00121"></a><a class="code" href="structcanix__frame.html">00121</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00122"></a>00122 {
<a name="l00126"></a><a class="code" href="structcanix__frame.html#840557141148ee4711699e8e2c169013">00126</a>     uint16_t src;
<a name="l00127"></a>00127 
<a name="l00131"></a><a class="code" href="structcanix__frame.html#1e1868e00870b0a50b69c1ada950a425">00131</a>     uint16_t dst;
<a name="l00132"></a>00132 
<a name="l00136"></a><a class="code" href="structcanix__frame.html#d60b7525c58fdf1fcf02060345239037">00136</a>     uint8_t proto;
<a name="l00137"></a>00137 
<a name="l00142"></a><a class="code" href="structcanix__frame.html#46db003664ef02e4855b2383b3ab280e">00142</a>     uint8_t size;
<a name="l00143"></a>00143 
<a name="l00147"></a><a class="code" href="structcanix__frame.html#403e2a22db5b770c322f0bb5e7e7282f">00147</a>     uint8_t data[8];
<a name="l00148"></a>00148 
<a name="l00149"></a>00149 } <a class="code" href="structcanix__frame.html">canix_frame</a>;
<a name="l00150"></a>00150 
<a name="l00154"></a><a class="code" href="canix_8h.html#6e5d26a3e024074f7058e053d4a33336">00154</a> <span class="keyword">typedef</span> void (*<a class="code" href="canix_8h.html#6e5d26a3e024074f7058e053d4a33336">canix_frame_callback</a>) (<span class="keyword">const</span> <a class="code" href="structcanix__frame.html">canix_frame</a> *frame);
<a name="l00155"></a>00155 
<a name="l00159"></a><a class="code" href="canix_8h.html#7e13616b7a245975818954d43b1b338a">00159</a> <span class="keyword">typedef</span> void (*<a class="code" href="canix_8h.html#7e13616b7a245975818954d43b1b338a">canix_idle_callback</a>) (void);
<a name="l00160"></a>00160 
<a name="l00164"></a><a class="code" href="canix_8h.html#c02ea5afd7978308f150dc823eb1d241">00164</a> <span class="keyword">typedef</span> void (*<a class="code" href="canix_8h.html#c02ea5afd7978308f150dc823eb1d241">canix_rtc_callback</a>) (void);
<a name="l00165"></a>00165 
<a name="l00178"></a>00178 uint8_t <a class="code" href="canix_8c.html#0aa66200e2ea0fafcd84e33e05427967">canix_init</a>(<span class="keywordtype">void</span>);
<a name="l00179"></a>00179 
<a name="l00183"></a>00183 uint16_t <a class="code" href="canix_8c.html#6b25751e4e4e70ed76b15097e611704f">canix_selfaddr</a>(<span class="keywordtype">void</span>);
<a name="l00184"></a>00184 
<a name="l00197"></a>00197 <span class="keywordtype">void</span> <a class="code" href="canix_8c.html#9ad6b51ae259cd200289f44b303862bb">canix_reg_frame_callback</a>(<a class="code" href="canix_8h.html#6e5d26a3e024074f7058e053d4a33336">canix_frame_callback</a> callback, 
<a name="l00198"></a>00198         <span class="keywordtype">int</span> dst, uint8_t proto, uint8_t srv);
<a name="l00199"></a>00199 
<a name="l00205"></a>00205 <span class="keywordtype">void</span> <a class="code" href="canix_8c.html#c96af311c91b003bb105fc8e2473051b">canix_reg_idle_callback</a>(<a class="code" href="canix_8h.html#7e13616b7a245975818954d43b1b338a">canix_idle_callback</a> callback);
<a name="l00206"></a>00206 
<a name="l00217"></a>00217 <span class="keywordtype">void</span> <a class="code" href="canix_8c.html#1646efbd7a4a4652a19db52d92a6cb48">canix_reg_rtc_callback</a>(<a class="code" href="canix_8h.html#c02ea5afd7978308f150dc823eb1d241">canix_rtc_callback</a> callback);
<a name="l00218"></a>00218 
<a name="l00224"></a>00224 <span class="keywordtype">void</span> <a class="code" href="canix_8c.html#22d6e59bbd66f61676cecfaa1ca659f7">canix_mainloop</a>(<span class="keywordtype">void</span>);
<a name="l00225"></a>00225 
<a name="l00231"></a>00231 <span class="keywordtype">void</span> <a class="code" href="canix_8c.html#1b738624595b5c99890d9553bf65c214">canix_process_messages</a>(<span class="keywordtype">void</span>);
<a name="l00232"></a>00232 
<a name="l00243"></a>00243 <span class="keywordtype">void</span> <a class="code" href="canix_8c.html#771938d7adbec51e8b4d9097c12be8a1">canix_frame_send</a>(<span class="keyword">const</span> <a class="code" href="structcanix__frame.html">canix_frame</a> *frame);
<a name="l00244"></a>00244 
<a name="l00256"></a>00256 <span class="keywordtype">void</span> <a class="code" href="canix_8c.html#4312811c40e44902819311fec54e9245">canix_frame_send_with_prio</a>(<span class="keyword">const</span> <a class="code" href="structcanix__frame.html">canix_frame</a> *frame, uint8_t prio);
<a name="l00257"></a>00257 
<a name="l00264"></a>00264 <span class="keywordtype">void</span> <a class="code" href="canix_8c.html#9664a4214401645c1ba9629e9dd43f85">canix_reset</a>(<span class="keywordtype">void</span>);
<a name="l00265"></a>00265 
<a name="l00278"></a>00278 <span class="keywordtype">void</span> <a class="code" href="canix_8c.html#97444a1654f4161236c8c9be60d4086c">canix_deliver_frame</a>(<span class="keyword">const</span> <a class="code" href="structcanix__frame.html">canix_frame</a> *frame);
<a name="l00279"></a>00279 
<a name="l00284"></a>00284 <span class="keywordtype">void</span> <a class="code" href="canix_8c.html#0e17308266aa410354f69cd9ac128632">canix_sleep_100th</a>(uint8_t n);
<a name="l00285"></a>00285 
<a name="l00286"></a>00286 uint8_t <a class="code" href="canix_8c.html#3ca95f85374640f22523865c16ad12b9">canix_rxq_size</a>(<span class="keywordtype">void</span>);
<a name="l00287"></a>00287 uint8_t <a class="code" href="canix_8c.html#c192c19377022a9943e084b9020efeb5">canix_rxq_fetch_one</a>(<span class="keywordtype">void</span>);
<a name="l00288"></a>00288 
<a name="l00289"></a><a class="code" href="structcanix__rx__queue__entry__t.html">00289</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>
<a name="l00290"></a>00290 {
<a name="l00291"></a><a class="code" href="structcanix__rx__queue__entry__t.html#d7e102381214c3648190d5a9a15ea755">00291</a>     uint8_t used;
<a name="l00292"></a><a class="code" href="structcanix__rx__queue__entry__t.html#3715cc3e914eb0e0614d72ef2b69da24">00292</a>     uint32_t extended;
<a name="l00293"></a><a class="code" href="structcanix__rx__queue__entry__t.html#deb0bcd7333c76d0f696b818aa64b74e">00293</a>     uint8_t size;
<a name="l00294"></a><a class="code" href="structcanix__rx__queue__entry__t.html#6df8da4fd485d56186dd73a818769d01">00294</a>     uint8_t data[8];
<a name="l00295"></a>00295 } <a class="code" href="structcanix__rx__queue__entry__t.html">canix_rx_queue_entry_t</a>;
<a name="l00296"></a>00296 
<a name="l00297"></a><a class="code" href="canix_8h.html#ceb00b1b4264da805d7956e7ba62a775">00297</a> <span class="preprocessor">#define CANIX_QUEUE_SIZE 12</span>
<a name="l00298"></a>00298 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="keyword">volatile</span> <a class="code" href="structcanix__rx__queue__entry__t.html">canix_rx_queue_entry_t</a> 
<a name="l00299"></a>00299     <a class="code" href="canix_8c.html#61028144dcafb2668275fb96cb98b00a">canix_rx_queue</a>[<a class="code" href="canix_8h.html#ceb00b1b4264da805d7956e7ba62a775">CANIX_QUEUE_SIZE</a>];
<a name="l00300"></a>00300 
<a name="l00301"></a>00301 
<a name="l00302"></a>00302 <span class="keyword">extern</span> <span class="keyword">volatile</span> uint32_t <a class="code" href="canix_8c.html#8d08c0aa332b274c83d72d7b26963613">canix_rx_received</a>;
<a name="l00303"></a>00303 <span class="keyword">extern</span> <span class="keyword">volatile</span> uint32_t <a class="code" href="canix_8c.html#eab250c9c0611dd34b0b21b4d251b7db">canix_rx_lost</a>;
<a name="l00304"></a>00304 <span class="keyword">extern</span> <span class="keyword">volatile</span> uint32_t <a class="code" href="canix_8c.html#2c3a7c87bb3f144b83176ff71fac5ce6">canix_tx_sent</a>;
<a name="l00305"></a>00305 <span class="keyword">extern</span> <span class="keyword">volatile</span> uint32_t <a class="code" href="canix_8c.html#685d520d2b7e1d71ebbf3ce9f8a30645">canix_tx_dropped</a>;
<a name="l00306"></a>00306 
<a name="l00307"></a>00307 <span class="preprocessor">#endif</span>
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Erzeugt am Sun Feb 8 11:37:09 2009 für canix von&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
